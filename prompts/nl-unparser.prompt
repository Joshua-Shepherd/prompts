task: "NLP unparser: Generate text using POS tags"
doc: "Generate text given a list of POS tags"
prompt-version: 1
prompt: |+
  Parse tree and matching passage:
  <delim>
  1) Parts of speech tagging:
  <delim>
  NP V Det N
  <delim>
  (NP)John (V)hit (Det)the (N)ball
  <delim>
  NP V Det N
  <delim>  
  2) Parts of speech tagging:
  <delim>
  NP V DT N IN T N
  <delim>
  (NP)I (V)drive (DT)a (N)car (IN)to (DT)my (N)college
  <delim>
  NP V Det N IN Det N
  <delim>
  3) Parts of speech tagging:
  <delim>
  <POS tags>
  <delim>
  <:pp>(<first tag>)
engine: "OpenAI Codex"
temperature: 0.3
max-generated-tokens: "(* 2 prompt-length)"
top-p: 1.0
stop-sequences:
- "<delim>"
cache: on
# TODO I should also allow vars to access vars when evaluating
vars:
- "POS tags"
# - "first tag"
# var-defaults:
# - ~
# - "(car (s-split \" \" pos-tags))"
examples:
- "NP V DT JJ N"
defs:
- first tag: "(car (s-split \" \" pos-tags))"
- validator-regex: "(mapcar (lambda (s) (concat \"\\\\(\" s \"\\\\)\" \"[^\\\\(]+\")) (s-split \" \" pos-tags))"
validator: "grep -qP \"^<validator-regex>$\""
filter: on
completion: off
insertion: off