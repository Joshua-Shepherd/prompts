task: "Transform code"
doc: "Transform some code given the language and a transformation description"
prompt-version: 3
engine: OpenAI Codex
subprompts:
- original-program: |+
    # The original <language> program

    cat original_program <<EOD
    <code>
    EOD
prompt: |+
    <original-program>

    # The exact same program but <transformation>

    cat edited_program <<EOD
xlr-n-generate: 5
temperature: 0.0
# On each collated generation, rotate the temperature upwards by 0.1
collation-temperature-stepper: "(mod* (+ <temperature> 0.1) 1)"
top-p: 1.0
best-of: 1
cache: on
stop-sequences:
- "EOD"
vars:
- code
- "language"
- transformation
preprocessors:
- cat
- slugify
var-defaults:
- "(pen-selected-text)"
- "(pen-detect-language-ask)"
postprocessors:
- sed '$d'
examples:
- "print(\"Hello world with empathy\")"
- "Python"
- "with comments above each line"
n-test-runs: 5
# 3rd collation @ 0.2 temp sometimes makes great results (comments)
# other times, long programs
n-collate: 2
n-completions: 2
new-document: yes